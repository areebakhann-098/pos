<div class="max-w-6xl mx-auto p-6 bg-white rounded-lg shadow-lg overflow-x-auto">
  <h2 class="text-xl font-bold mb-4 text-gray-800">Stock Transfer Report</h2>

  <!-- ✅ Totals Above Table -->
  <div class="mb-4 p-4 bg-gray-100 rounded-lg flex justify-between flex-wrap text-sm font-semibold">
    <div>Total Quantity: <span class="text-blue-600">{{ totalQty }}</span></div>
    <div>Total Shipment Charges: <span class="text-orange-600">{{ totalShipment | number:'1.0-2' }}</span></div>
    <div>Total Amount: <span class="text-green-600">{{ totalAmount | number:'1.0-2' }}</span></div>
  </div>

<div class="overflow-hidden border border-gray-200 rounded-xl">
  <table class="min-w-full divide-y divide-gray-200 text-sm">
    <thead class="bg-gray-100 text-gray-700">
      <tr>
        <th class="py-3 px-4 text-left font-semibold">#</th>
        <th class="py-3 px-4 text-left font-semibold">Reference No</th>
        <th class="py-3 px-4 text-left font-semibold">From Location</th>
        <th class="py-3 px-4 text-left font-semibold">To Location</th>
        <th class="py-3 px-4 text-left font-semibold">Product</th>
        <th class="py-3 px-4 text-center font-semibold">Quantity</th>
        <th class="py-3 px-4 text-left font-semibold">Date</th>
        <th class="py-3 px-4 text-right font-semibold">Shipment Charges</th>
        <th class="py-3 px-4 text-left font-semibold">Notes</th>
        <th class="py-3 px-4 text-right font-semibold">Total Amount</th>
      </tr>
    </thead>

    <tbody class="divide-y divide-gray-100">
      <tr
        *ngFor="let transfer of stockTransfers; let i = index"
        class="hover:bg-gray-50 transition"
      >
        <td class="py-3 px-4 text-gray-600">{{ i + 1 }}</td>
        <td class="py-3 px-4 text-gray-800">{{ transfer.reference_no }}</td>
        <td class="py-3 px-4 text-gray-700">
          {{ transfer.fromLocation?.name || '—' }}
        </td>
        <td class="py-3 px-4 text-gray-700">
          {{ transfer.toLocation?.name || '—' }}
        </td>
        <td class="py-3 px-4 text-gray-800">
          {{ transfer.product?.product_name || '—' }}
        </td>
        <td class="py-3 px-4 text-center font-medium text-blue-700">
          {{ transfer.quantity || 0 }}
        </td>
        <td class="py-3 px-4 text-gray-700">
          {{ transfer.date | date: 'mediumDate' }}
        </td>
        <td class="py-3 px-4 text-right text-orange-700">
          Rs. {{ transfer.shipment_charges || 0 | number: '1.0-2' }}
        </td>
        <td class="py-3 px-4 text-gray-600">
          {{ transfer.additional_notes || '—' }}
        </td>
        <td class="py-3 px-4 text-right font-semibold text-green-700">
          Rs. {{ transfer.total_amount || 0 | number: '1.0-2' }}
        </td>
      </tr>

      <!-- ✅ Totals Row -->
      <tr class="bg-gray-50 font-semibold text-gray-800">
        <td colspan="5" class="py-3 px-4 text-right border-t border-gray-200">
          <span class="text-gray-700 font-semibold">Totals:</span>
        </td>
        <td class="py-3 px-4 text-center border-t border-gray-200 text-blue-700">
          {{ totalQty }}
        </td>
        <td colspan="1" class="border-t border-gray-200"></td>

        <!-- ✅ Shipment Total clearly shown -->
        <td
          class="py-3 px-4 text-right border-t border-gray-200 text-orange-700 font-semibold"
        >
          <div>Rs. {{ totalShipment | number: '1.0-2' }}</div>
        </td>

        <td class="py-3 px-4 border-t border-gray-200"></td>

        <!-- ✅ Amount total -->
        <td
          class="py-3 px-4 text-right border-t border-gray-200 text-green-700 font-semibold"
        >
          Rs. {{ totalAmount | number: '1.0-2' }}
        </td>
      </tr>
    </tbody>
  </table>
</div>


  <!-- ✅ No Data -->
  <div
    *ngIf="stockTransfers.length === 0"
    class="text-center text-gray-500 mt-6 text-sm italic"
  >
    No stock transfers found.
  </div>
