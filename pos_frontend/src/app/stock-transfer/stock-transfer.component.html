<div class="max-w-6xl mx-auto mt-10 p-6 bg-white rounded-lg shadow-lg">
  <h2 class="text-2xl font-bold mb-6 text-gray-800">Stock Transfer</h2>

  <form class="space-y-6" (ngSubmit)="saveTransfer()">

    <!-- Reference No -->
    <div>
      <label class="block mb-2 font-medium text-gray-700">Reference No</label>
      <input type="text" placeholder="Enter reference number"
        class="w-full p-2 border border-gray-300 rounded" />
    </div>

    <!-- Date -->
    <div>
      <label class="block mb-2 font-medium text-gray-700">Date</label>
      <input type="date" class="w-full p-2 border border-gray-300 rounded" />
    </div>

    <!-- Status -->
    <div>
      <label class="block mb-2 font-medium text-gray-700">Status</label>
      <select class="w-full p-2 border border-gray-300 rounded">
        <option value="pending">Pending</option>
        <option value="completed">Completed</option>
        <option value="in-transit">In Transit</option>
      </select>
    </div>

    <!-- Locations -->
    <div class="grid grid-cols-2 gap-4">
      <div>
        <label class="block mb-2 font-medium text-gray-700">Location From</label>
        <select class="w-full p-2 border border-gray-300 rounded">
          <option>Warehouse 1</option>
          <option>Warehouse 2</option>
        </select>
      </div>
      <div>
        <label class="block mb-2 font-medium text-gray-700">Location To</label>
        <select class="w-full p-2 border border-gray-300 rounded">
          <option>Warehouse 1</option>
          <option>Warehouse 2</option>
        </select>
      </div>
    </div>

 <!-- Search Products -->
<div>
  <label class="block mb-2 font-medium text-gray-700">Search Product</label>
  <input type="text" [(ngModel)]="searchTerm" name="searchTerm"
    placeholder="Type to search..."
    class="w-full p-2 border border-gray-300 rounded" />
  
  <!-- Suggestions -->
  <ul *ngIf="searchTerm && filteredProducts.length > 0" 
      class="border border-gray-300 rounded mt-1 bg-white shadow-md max-h-40 overflow-y-auto">
    <li *ngFor="let p of filteredProducts" 
        (click)="addProduct(p)" 
        class="px-3 py-2 hover:bg-green-100 cursor-pointer">
      {{ p.name }} - Rs. {{ p.price }}
    </li>
  </ul>
</div>


<!-- Product Table -->
<div class="overflow-x-auto mt-6">
  <table class="min-w-full border border-gray-200 rounded-lg shadow-sm">
    <thead class="bg-green-600 text-white">
      <tr>
        <th class="px-4 py-2">#</th>
        <th class="px-4 py-2 text-left">Product</th>
        <th class="px-4 py-2 text-center">Qty</th>
        <th class="px-4 py-2 text-center">Price</th>
        <th class="px-4 py-2 text-center">Line Total</th>
        <th class="px-4 py-2 text-center">Actions</th>
      </tr>
    </thead>
    <tbody class="divide-y divide-gray-200">
      <tr *ngFor="let item of items; let i = index">
        <td class="px-4 py-2 text-center">{{ i + 1 }}</td>
        <td class="px-4 py-2">{{ item.product?.name }}</td>
        <td class="px-4 py-2 text-center">
          <input type="number" [(ngModel)]="item.quantity" name="qty-{{i}}"
            (input)="updateLineTotal(item)"
            class="w-20 p-2 border border-gray-300 rounded text-center" />
        </td>
        <td class="px-4 py-2 text-center">
          {{ item.price }}
        </td>
        <td class="px-4 py-2 text-center font-semibold">
          {{ item.lineTotal }}
        </td>
        <td class="px-4 py-2 text-center">
          <button type="button" (click)="removeRow(i)" 
                  class="text-red-600 hover:text-red-800">ðŸ—‘</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>


    <!-- Totals -->
    <div class="flex justify-end mt-4">
      <div class="bg-gray-100 p-4 rounded-lg shadow">
        <p class="font-semibold text-gray-700">Total Amount:
          <span class="text-blue-600">{{ totalAmount }}</span>
        </p>
      </div>
    </div>

    <!-- Shipping Charges -->
    <div>
      <label class="block mb-2 font-medium text-gray-700">Shipping Charges</label>
      <input type="number" [(ngModel)]="shippingCharges" name="shipping"
        class="w-full p-2 border border-gray-300 rounded" />
    </div>

    <!-- Notes -->
    <div>
      <label class="block mb-2 font-medium text-gray-700">Additional Notes</label>
      <textarea rows="3" class="w-full p-2 border border-gray-300 rounded"></textarea>
    </div>

    <!-- Submit -->
    <button type="submit" class="w-full bg-blue-600 text-white font-medium py-2 rounded hover:bg-blue-700">
      Save Stock Transfer
    </button>
  </form>
</div>
